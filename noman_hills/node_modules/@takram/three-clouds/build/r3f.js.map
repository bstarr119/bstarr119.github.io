{"version":3,"file":"r3f.js","sources":["../src/r3f/CloudLayers.tsx","../src/r3f/Clouds.tsx","../src/r3f/CloudLayer.tsx"],"sourcesContent":null,"names":["CloudLayersContext","CloudLayers","layers","disableDefault","children","context","setContext","useState","useLayoutEffect","CloudLayer","CloudLayersImpl","jsx","useTextureState","input","gl","data","setData","useEffect","loader","TextureLoader","texture","LinearMipMapLinearFilter","LinearFilter","RepeatWrapping","NoColorSpace","error","use3DTextureState","size","Loader","createData3DTextureLoaderClass","parseUint8Array","RedFormat","useSTBNTextureState","STBNLoader","Clouds","forwardRef","disableDefaultLayers","localWeatherTextureProp","DEFAULT_LOCAL_WEATHER_URL","shapeTextureProp","DEFAULT_SHAPE_URL","shapeDetailTextureProp","DEFAULT_SHAPE_DETAIL_URL","turbulenceTextureProp","DEFAULT_TURBULENCE_URL","stbnTextureProp","DEFAULT_STBN_URL","props","forwardedRef","textures","transientStates","contextProps","useContext","AtmosphereContext","atmosphereParameters","others","separateProps","cloudsPassOptionsDefaults","effect","useMemo","CloudsEffect","useFrame","handleChange","useCallback","event","useThree","localWeatherTexture","shapeTexture","CLOUD_SHAPE_TEXTURE_SIZE","shapeDetailTexture","CLOUD_SHAPE_DETAIL_TEXTURE_SIZE","turbulenceTexture","stbnTexture","camera","EffectComposerContext","jsxs","Fragment","indexProp","indexPool","index","setIndex","poolIndex","a","b","layer","CloudLayerImpl"],"mappings":"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"}
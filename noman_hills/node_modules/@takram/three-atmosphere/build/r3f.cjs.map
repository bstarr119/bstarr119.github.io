{"version":3,"file":"r3f.cjs","sources":["../src/r3f/Atmosphere.tsx","../src/r3f/separateProps.ts","../src/r3f/AerialPerspective.tsx","../src/r3f/Sky.tsx","../node_modules/.pnpm/react-merge-refs@2.1.1/node_modules/react-merge-refs/dist/index.mjs","../src/r3f/SkyLight.tsx","../src/r3f/Stars.tsx","../src/r3f/SunLight.tsx","../src/r3f/useAtmosphereTextureProps.ts"],"sourcesContent":null,"names":["AtmosphereContext","createContext","Atmosphere","forwardRef","texturesProp","DEFAULT_PRECOMPUTED_TEXTURES_URL","ellipsoid","Ellipsoid","correctAltitude","photometric","date","children","forwardedRef","transientStatesRef","useRef","Vector3","Matrix4","gl","useThree","textures","setTextures","useState","useEffect","loader","PrecomputedTexturesLoader","error","context","useMemo","updateByDate","sunDirection","moonDirection","rotationMatrix","getECIToECEFRotationMatrix","getSunDirectionECI","getMoonDirectionECI","timestamp","useImperativeHandle","separateProps","params","irradianceTexture","scatteringTexture","transmittanceTexture","sunAngularRadius","renderTargetCount","others","useSTBNTextureState","input","data","setData","STBNLoader","AerialPerspective","stbnTextureProp","DEFAULT_STBN_URL","props","transientStates","contextProps","useContext","atmosphereParameters","blendFunction","aerialPerspectiveEffectOptionsDefaults","EffectComposerContext","normalPass","camera","geometryTexture","RenderPass","Texture","effect","AerialPerspectiveEffect","needsSTBN","setNeedsSTBN","useFrame","stbnTexture","jsx","Sky","sun","moon","moonAngularRadius","lunarRadianceScale","groundAlbedo","meshProps","skyMaterialParametersDefaults","material","SkyMaterial","ScreenQuad","SKY_RENDER_ORDER","o","f","SkyLight","ref","probe","extend","SkyLightProbe","mergeRefs","skyLightProbeParametersDefaults","Stars","dataProp","DEFAULT_STARS_DATA_URL","pointSize","radianceScale","background","starsMaterialParametersDefaults","ArrayBufferLoader","geometry","StarsGeometry","StarsMaterial","_a","jsxs","SunLight","position","light","target","Object3D","SunDirectionalLight","Fragment","sunDirectionalLightParametersDefaults","useAtmosphereTextureProps","url","useLoader"],"mappings":"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","x_google_ignoreList":[4]}
{"version":3,"file":"r3f.js","sources":["../src/r3f/Atmosphere.tsx","../src/r3f/separateProps.ts","../src/r3f/AerialPerspective.tsx","../src/r3f/Sky.tsx","../node_modules/.pnpm/react-merge-refs@2.1.1/node_modules/react-merge-refs/dist/index.mjs","../src/r3f/SkyLight.tsx","../src/r3f/Stars.tsx","../src/r3f/SunLight.tsx","../src/r3f/useAtmosphereTextureProps.ts"],"sourcesContent":null,"names":["AtmosphereContext","createContext","Atmosphere","forwardRef","texturesProp","DEFAULT_PRECOMPUTED_TEXTURES_URL","ellipsoid","Ellipsoid","correctAltitude","photometric","date","children","forwardedRef","transientStatesRef","useRef","Vector3","Matrix4","gl","useThree","textures","setTextures","useState","useEffect","loader","PrecomputedTexturesLoader","error","context","useMemo","updateByDate","sunDirection","moonDirection","rotationMatrix","getECIToECEFRotationMatrix","getSunDirectionECI","getMoonDirectionECI","timestamp","useImperativeHandle","separateProps","params","irradianceTexture","scatteringTexture","transmittanceTexture","sunAngularRadius","renderTargetCount","others","useSTBNTextureState","input","data","setData","STBNLoader","AerialPerspective","stbnTextureProp","DEFAULT_STBN_URL","props","transientStates","contextProps","useContext","atmosphereParameters","blendFunction","aerialPerspectiveEffectOptionsDefaults","EffectComposerContext","normalPass","camera","geometryTexture","RenderPass","Texture","effect","AerialPerspectiveEffect","needsSTBN","setNeedsSTBN","useFrame","stbnTexture","jsx","Sky","sun","moon","moonAngularRadius","lunarRadianceScale","groundAlbedo","meshProps","skyMaterialParametersDefaults","material","SkyMaterial","ScreenQuad","SKY_RENDER_ORDER","o","f","r","SkyLight","ref","probe","extend","SkyLightProbe","mergeRefs","skyLightProbeParametersDefaults","Stars","dataProp","DEFAULT_STARS_DATA_URL","pointSize","radianceScale","background","starsMaterialParametersDefaults","ArrayBufferLoader","geometry","StarsGeometry","StarsMaterial","_a","jsxs","SunLight","position","light","target","Object3D","SunDirectionalLight","Fragment","sunDirectionalLightParametersDefaults","useAtmosphereTextureProps","url","useLoader"],"mappings":"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","x_google_ignoreList":[4]}